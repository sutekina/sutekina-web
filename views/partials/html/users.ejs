<div id="user-identifier" data-user="<%- page.user.id %>" style="display: none;"></div>

<%- include('../../extra/loading') %>

<% if (page.user.id === 32 && new Date().toISOString().includes("-09-12")) { %>
    <style>
        /* tmoney treatment :D */
        .profile {
            /* background-repeat: repeat; */
            background-position: top -10px center;
            background-image: url("data:image/svg+xml,%3Csvg width='600' height='90' viewBox='0 0 600 90' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='42' y='-10' width='6' height='10'/%3E%3Crect x='84' y='-10' width='6' height='10'/%3E%3Crect x='126' y='-13' width='5' height='13'/%3E%3Crect x='168' y='-13' width='5' height='13'/%3E%3Crect x='210' y='-10' width='6' height='10'/%3E%3Crect x='252' y='-13' width='5' height='13'/%3E%3Crect x='294' y='-10' width='6' height='10'/%3E%3Crect x='336' y='-13' width='5' height='13'/%3E%3Crect x='378' y='-13' width='5' height='13'/%3E%3Crect x='420' y='-10' width='6' height='10'/%3E%3Crect x='462' y='-10' width='6' height='10'/%3E%3Crect x='504' y='-13' width='5' height='13'/%3E%3Crect x='546' y='-10' width='6' height='10'/%3E%3Cstyle type='text/css'%3E rect %7B opacity: 0; %7D rect:nth-child(1) %7B transform-origin: 45px 5px; transform: rotate(-145deg); animation: blast 700ms infinite ease-out; animation-delay: 88ms; animation-duration: 631ms; %7D rect:nth-child(2) %7B transform-origin: 87px 5px; transform: rotate(164deg); animation: blast 700ms infinite ease-out; animation-delay: 131ms; animation-duration: 442ms; %7D rect:nth-child(3) %7B transform-origin: 128px 6px; transform: rotate(4deg); animation: blast 700ms infinite ease-out; animation-delay: 92ms; animation-duration: 662ms; %7D rect:nth-child(4) %7B transform-origin: 170px 6px; transform: rotate(-175deg); animation: blast 700ms infinite ease-out; animation-delay: 17ms; animation-duration: 593ms; %7D rect:nth-child(5) %7B transform-origin: 213px 5px; transform: rotate(-97deg); animation: blast 700ms infinite ease-out; animation-delay: 122ms; animation-duration: 476ms; %7D rect:nth-child(6) %7B transform-origin: 255px 6px; transform: rotate(57deg); animation: blast 700ms infinite ease-out; animation-delay: 271ms; animation-duration: 381ms; %7D rect:nth-child(7) %7B transform-origin: 297px 5px; transform: rotate(-46deg); animation: blast 700ms infinite ease-out; animation-delay: 131ms; animation-duration: 619ms; %7D rect:nth-child(8) %7B transform-origin: 338px 6px; transform: rotate(-65deg); animation: blast 700ms infinite ease-out; animation-delay: 85ms; animation-duration: 668ms; %7D rect:nth-child(9) %7B transform-origin: 380px 6px; transform: rotate(13deg); animation: blast 700ms infinite ease-out; animation-delay: 128ms; animation-duration: 377ms; %7D rect:nth-child(10) %7B transform-origin: 423px 5px; transform: rotate(176deg); animation: blast 700ms infinite ease-out; animation-delay: 311ms; animation-duration: 508ms; %7D rect:nth-child(11) %7B transform-origin: 465px 5px; transform: rotate(108deg); animation: blast 700ms infinite ease-out; animation-delay: 108ms; animation-duration: 595ms; %7D rect:nth-child(12) %7B transform-origin: 506px 6px; transform: rotate(62deg); animation: blast 700ms infinite ease-out; animation-delay: 105ms; animation-duration: 375ms; %7D rect:nth-child(13) %7B transform-origin: 549px 5px; transform: rotate(16deg); animation: blast 700ms infinite ease-out; animation-delay: 149ms; animation-duration: 491ms; %7D rect:nth-child(odd) %7B fill: %2365BB5C; %7D rect:nth-child(even) %7B z-index: 1; fill: %2333AAFF; %7D rect:nth-child(4n) %7B animation-duration: 1400ms; fill: %23F23B14; %7D rect:nth-child(3n) %7B animation-duration: 1750ms; animation-delay: 700ms; %7D rect:nth-child(4n-7) %7B fill: %232A2F6A; %7D rect:nth-child(6n) %7B fill: %23FBBA23; %7D @keyframes blast %7B from %7B opacity: 0; %7D 20%25 %7B opacity: 1; %7D to %7B transform: translateY(90px); %7D %7D %3C/style%3E%3C/svg%3E%0A");
        }
    </style>
<% } %>

<div class="user">
    <div class="options">
        <div class="options-button options-vn" data-name="vn">vanilla</div>
        <div class="options-button options-rx" data-name="rx">relax</div>
        <div class="options-button options-ap" data-name="ap">autopilot</div>  
    </div>
    <div class="options">
        <div class="options-button options-std" data-name="std">standard</div>
        <div class="options-button options-taiko" data-name="taiko">taiko</div>
        <div class="options-button options-catch" data-name="catch">catch</div>
        <div class="options-button options-mania" data-name="mania">mania</div>
    </div>
    <div class="profile">
        <div class="user-info">
            <div class="user-about">
                <div class="user-about-icon" data-sutekina-title="<%- page.user.name %>" style="background-image: url('https://<%- config.domains.avatar %>/<%- page.user.id %>')"></div>
                <div class="user-about-details">
                    <div class="user-about-name" data-sutekina-title="<%- page.user.name %>"><%- page.user.name %></div>
                    <div class="user-about-country-container">
                        <a class="user-about-country"></a>
                        <p class="user-about-country-name"></p>
                    </div>
                </div>
            </div>
            <div class="user-stats">
                <dl class="user-stats-entry">
                    <dt>accuracy</dt>
                    <dd id="accuracy"></dd>
                </dl>
                <dl class="user-stats-entry">
                    <dt>play count</dt>
                    <dd id="play-count"></dd>
                </dl>
                <dl class="user-stats-entry">
                    <dt>total score</dt>
                    <dd id="total-score"></dd>
                </dl>
                <dl class="user-stats-entry">
                    <dt>ranked score</dt>
                    <dd id="ranked-score"></dd>
                </dl>
                <dl class="user-stats-entry">
                    <dt>max combo</dt>
                    <dd id="max-combo"></dd>
                </dl>
            </div>
        </div>
        <div class="user-page">
            <div class="user-page-about">
                <div class="user-page-title">
                    <h1 class="">about me!</h1>
                    
                    <div class="user-badges"></div>
                </div>
                <p class="user-page-content">
                    This user is quite mysterious, ðŸ™‚ðŸ™‚ðŸ™‚.
                </p>
            </div>
        </div>
        <div class="user-chart">
            <div class="user-chart-container">
                <svg viewBox="0 0 900 100" preserveAspectRatio="none" class="user-chart-svg">
                    <polyline class="user-chart-polyline" points=""></polyline>
                </svg>
                <div class="user-chart-hover">
                    <div class="user-chart-hover-line"></div>
                    <div class="user-chart-hover-circle"></div>
                    <div class="user-chart-hover-info" data-float="left">
                        <div class="user-chart-hover-rank"></div>
                        <div class="user-chart-hover-date"></div>
                    </div>
                </div>
            </div>
            <div class="user-rank">
                <div class="user-rank-container global-rank">
                    <h1>global rank</h1>
                    <div id="global-rank"></div>
                </div>
                <div class="user-rank-container country-rank">
                    <h1>country rank</h1>
                    <div id="country-rank"></div>
                </div>
            </div>
        </div>
        <div class="user-extra">
            <!-- <div id="play-time"></div> -->
            <div class="user-extra-item-container">
                <div class="user-extra-item" id="created-at"></div>
                <div class="user-extra-item" id="latest-activity"></div>
            </div>

            <div id="performance-points"></div>
        </div>
    </div>
    <div class="best">
        <div class="best-scores scores-list">
            <h1>best scores</h1>
            <div class="best-scores-list scores">
                <!-- <div class="score">
                    <div class="score-grade"></div>
                    <div class="score-details">
                        <div class="beatmapset-info"></div>
                        <div class="beatmap-info">
                            <div class="beatmap-version"></div>
                            <div class="score-date"></div>
                        </div>
                    </div>
                    <div class="score-mods"></div>
                    <div class="score-accuracy"></div>
                    <div class="score-pp"></div>
                    <div class="score-replay-dl"></div>
                </div> -->
            </div>
            <button class="show-more show-more-best">show more</button>
        </div>
        <!-- commented until i figure out how to retrieve first places from mysql. TODO -->
        <!-- <div class="first-places">
            <h1>first places</h1>
            <div class="scores">
                
            </div>
        </div> -->
    </div>
    <div class="recent">
        <div class="recent-scores scores-list">
            <h1>recent scores</h1>
            <div class="recent-scores-list scores">
                
            </div>
            <button class="show-more show-more-recent">show more</button>
        </div>
    </div>
</div>
<%- include('../js/twemoji') %>
<%- include('../js/fetchUser') %> 